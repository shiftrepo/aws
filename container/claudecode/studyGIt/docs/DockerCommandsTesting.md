# Docker コマンド シミュレーション テスト計画

## テスト目的

GitPlayground アプリケーション内の Docker コマンドシミュレーション機能の品質と機能性を確保します。このテスト計画では、DockerSimulator.ts と DockerTerminal.tsx コンポーネントが期待通りに動作することを検証します。

## テスト環境

- **開発環境**: podman-compose を使用してローカル開発環境を設定
- **ブラウザ**: Chrome, Firefox, Safari の最新バージョン
- **ディスプレイ解像度**: 1920x1080, 1366x768, 375x667（モバイル）
- **実行コマンド**: `podman-compose up --build`

## テスト対象コンポーネント

1. **DockerSimulator.ts** - Docker コマンドシミュレーションのコアロジック
2. **DockerTerminal.tsx** - ユーザーインターフェースとシミュレータの連携
3. **DefaultDocker.js** - 初期 Docker 状態

## 機能テスト計画

### 1. 基本コマンド（レベル 1: BEGINNER）

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| docker ps | 1. DockerTerminal を開く<br>2. "docker ps" を入力<br>3. Enter キーを押す | コンテナ一覧が表示される。"git-playground" と "postgres-db" が running 状態で、"redis-cache" が exited 状態で表示される |
| docker ps -a | 1. "docker ps -a" を入力<br>2. Enter キーを押す | すべてのコンテナ（停止中含む）が表示される |
| docker images | 1. "docker images" を入力<br>2. Enter キーを押す | イメージ一覧が表示される。"git-playground:latest", "postgres:13", "redis:alpine", "node:16" が表示される |
| docker run | 1. "docker run --name test-nginx -p 8080:80 -d nginx:alpine" を入力<br>2. Enter キーを押す | エラーメッセージが表示される（イメージが見つからない） |
| docker start/stop | 1. "docker stop redis-cache" を入力<br>2. Enter キーを押す<br>3. "docker start redis-cache" を入力<br>4. Enter キーを押す<br>5. "docker ps" を入力 | 1. 停止成功メッセージが表示される<br>2. 起動成功メッセージが表示される<br>3. redis-cache が running 状態で表示される |
| docker help | 1. "docker help" を入力<br>2. Enter キーを押す | 現在のレベルで利用可能なコマンド一覧が表示される |

### 2. 基本コマンド（レベル 2: BASIC）

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| レベルアップ | 1. "レベルアップ" ボタンをクリック | レベルアップメッセージが表示される。レベルが 2 になる |
| docker pull | 1. "docker pull nginx:alpine" を入力<br>2. Enter キーを押す<br>3. "docker images" を入力 | 1. イメージ取得成功メッセージが表示される<br>2. イメージ一覧に "nginx:alpine" が追加されている |
| docker rm | 1. "docker run -d --name temp-container nginx:alpine" を入力<br>2. "docker stop temp-container" を入力<br>3. "docker rm temp-container" を入力<br>4. "docker ps -a" を入力 | temp-container がコンテナ一覧から削除されている |
| docker rmi | 1. "docker rmi node:16" を入力<br>2. "docker images" を入力 | 1. イメージ削除成功メッセージが表示される<br>2. イメージ一覧から "node:16" が削除されている |
| docker logs | 1. "docker logs git-playground" を入力 | git-playground コンテナのログが表示される |

### 3. 中級コマンド（レベル 3: INTERMEDIATE）

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| レベルアップ | 1. "レベルアップ" ボタンを再度クリック | レベルアップメッセージが表示される。レベルが 3 になる |
| docker build | 1. "docker build -t custom-app:1.0 ." を入力 | ビルド成功メッセージが表示される |
| docker network | 1. "docker network ls" を入力<br>2. "docker network create test-network" を入力<br>3. "docker network ls" を入力再度 | 1. ネットワーク一覧が表示される<br>2. ネットワーク作成メッセージが表示される<br>3. test-network が一覧に追加されている |
| docker volume | 1. "docker volume ls" を入力<br>2. "docker volume create test-volume" を入力<br>3. "docker volume ls" を入力再度 | 1. ボリューム一覧が表示される<br>2. ボリューム作成メッセージが表示される<br>3. test-volume が一覧に追加されている |
| docker exec | 1. "docker exec git-playground ls -la" を入力 | git-playground コンテナ内のファイル一覧が表示される |

### 4. 上級コマンド（レベル 4: ADVANCED）

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| レベルアップ | 1. "レベルアップ" ボタンを再度クリック | レベルアップメッセージが表示される。レベルが 4 になる |
| docker compose | 1. "docker compose up -d" を入力<br>2. "docker ps" を入力 | 1. サービス起動メッセージが表示される<br>2. Compose で定義されたサービスのコンテナが表示されている |
| docker compose down | 1. "docker compose down" を入力<br>2. "docker ps" を入力 | 1. サービス停止メッセージが表示される<br>2. Compose で定義されたサービスのコンテナが表示されていない |

## UIテスト

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| UI表示 | DockerTerminal コンポーネントを表示 | ターミナル風のUIが正しく表示される |
| コマンド入力 | テキスト入力フィールドにコマンドを入力 | 入力したコマンドがフィールドに表示される |
| コマンド実行 | コマンドを入力して Enter を押す | コマンドと実行結果が出力エリアに表示される |
| クイックアクション | 各クイックアクションボタンをクリック | 対応するコマンドが実行される |
| レベルアップボタン | レベルアップボタンをクリック | 難易度レベルが上がり、新しいコマンドが利用可能になる |
| ヘルプ情報 | 各レベルでのヘルプ情報の表示 | レベルに応じたコマンド一覧が表示される |
| レスポンシブ表示 | 各種画面サイズでの表示確認 | すべての画面サイズで適切に表示される |

## 状態管理テスト

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| 状態の初期化 | アプリケーションを新しく開く | DEFAULT_DOCKER_STATE の状態が正しく表示される |
| コマンド実行による状態変更 | コンテナ作成・削除などのコマンドを実行 | Docker の状態が適切に更新される |
| 可視化との連携 | 1. コンテナを作成/削除<br>2. DockerVisualizer タブに切り替え | 可視化表示が更新された状態を反映している |
| 状態の永続化 | 1. コマンドでコンテナを作成<br>2. タブを切り替え<br>3. DockerTerminal タブに戻る | 作成したコンテナの状態が保持されている |

## エラー処理テスト

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| 不正なコマンド | "docker invalid-command" を入力 | エラーメッセージが適切に表示される |
| 存在しないコンテナ | "docker start non-existent" を入力 | 存在しないコンテナのエラーが表示される |
| 実行中コンテナの削除 | "docker rm git-playground" を入力 | 実行中のコンテナは削除できないエラーが表示される |
| 存在しないイメージ | "docker run non-existent-image" を入力 | 存在しないイメージのエラーが表示される |
| 権限不足の操作 | 特権が必要な操作のシミュレーション | 適切な権限エラーメッセージが表示される |

## 難易度レベルテスト

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| レベル制限 | 1. レベル 1 で中級コマンドを実行<br>2. レベル 2 で上級コマンドを実行 | レベル不足のエラーメッセージが表示される |
| レベルアップ機能 | 各レベルでレベルアップボタンをクリック | 段階的にレベルが上がり、利用可能なコマンドが増加する |
| 最大レベル | レベル 4 でレベルアップボタンをクリック | すでに最高レベルである旨のメッセージが表示される |
| レベル別ヘルプ | 各レベルで "docker help" を実行 | レベルに応じたコマンド一覧が表示される |

## パフォーマンステスト

| テストケース | テストステップ | 期待される結果 |
| ---------- | ------------ | ------------ |
| 大量コマンド実行 | 多数のコマンドを連続して実行 | レスポンスが遅延なく表示される |
| 多数コンテナ | 多数のコンテナを作成して表示 | パフォーマンスに著しい低下がない |
| メモリ使用量 | 長時間操作後のメモリ使用量を確認 | メモリリークが発生していない |

## クロスブラウザテスト

| ブラウザ | テストケース | 期待される結果 |
| ------- | ----------- | ------------- |
| Chrome | 基本機能確認 | すべての機能が正しく動作する |
| Firefox | 基本機能確認 | すべての機能が正しく動作する |
| Safari | 基本機能確認 | すべての機能が正しく動作する |
| Edge | 基本機能確認 | すべての機能が正しく動作する |
| Mobile Chrome | 基本機能確認 | レスポンシブデザインが正しく適用される |
| Mobile Safari | 基本機能確認 | レスポンシブデザインが正しく適用される |

## アクセシビリティテスト

| テストケース | 期待される結果 |
| ----------- | ------------- |
| キーボード操作 | キーボードのみでコマンド入力・実行が可能 |
| スクリーンリーダー | コマンド出力が適切に読み上げられる |
| コントラスト比 | テキストと背景のコントラストが十分 |

## テスト結果報告フォーマット

テスト結果は以下のフォーマットで GitHub Issue #48 に報告してください：

```markdown
## Docker コマンドシミュレーション テスト結果

### テスト概要
- テスト実施日: YYYY-MM-DD
- テスト担当者: [名前]
- テスト環境: [ブラウザ/OS]

### テスト結果サマリー
- 合格: XX件
- 失敗: XX件
- スキップ: XX件

### 失敗したテストケース
1. [テストケース名]
   - 期待された動作: [説明]
   - 実際の動作: [説明]
   - スクリーンショット: [添付]

### 気づき・改善提案
- [気づいた点や改善提案を箇条書きで]

### スクリーンショット
[主要な機能のスクリーンショットを添付]
```

## 定期テストスケジュール

1. **デイリーテスト**: 基本コマンドの動作確認（レベル1-2）
2. **週次テスト**: すべてのレベルのコマンドテスト
3. **リリース前テスト**: 完全なテストスイートの実行

---

## 回帰テスト計画

コードに変更があった際には、以下のテストを最低限実施してください：

1. 基本コマンドの動作確認（docker ps, docker images, docker run）
2. レベルアップ機能の確認
3. DockerVisualizer との連携確認
4. エラー処理の確認
5. UIの表示確認

これらのテストが合格した場合のみ、変更をマージしてください。