# tmux `pipe-pane` を利用した独立画面共有の手順

`tmux` の `pipe-pane` 機能と「**名前付きパイプ**」を組み合わせて、AさんとBさんが**完全に独立した環境で操作しつつ画面を共有**する方法を説明します。

---

## 🔧 準備：通信路（パイプ）の作成

まず、**AさんまたはBさん**のどちらかが、以下のコマンドを一度だけ実行し、通信路となる「名前付きパイプ」を作成します。

```bash
mkfifo /tmp/tmux_pipe
```

---

## 🧑‍💻 Bさんの操作：自分の画面を出力する

Bさんは**自分専用の `tmux` セッション**で作業を行い、必要な時に**Aさんへ画面を共有**します。

### 1. 通常作業

まず、Bさんは通常通り作業用のセッションを開始します。

```bash
tmux new -s b_session
```

### 2. 出力の開始

Aさんに画面を共有したいタイミングで、次の手順を実行します：

- `Ctrl-b` → `:`（コマンドプロンプトを表示）
- 以下のコマンドを入力して Enter：

```bash
pipe-pane 'cat > /tmp/tmux_pipe'
```

この操作で、**現在のペインの出力が `/tmp/tmux_pipe` に送られる**ようになります。

### 3. 出力の停止

共有を停止するには、再度コマンドモード（`Ctrl-b` → `:`）に入り、以下を入力：

```bash
pipe-pane
```

これで**パイプへの出力が停止**します。

---

## 🧑‍💻 Aさんの操作：Bさんの画面を表示する

Aさんは、**Bさんの出力を表示するための準備**を行います。

### 1. 画面の準備

Aさんも自分専用の `tmux` セッションを開始します：

```bash
tmux new -s a_session
```

次に、`Ctrl-b` の後に `%`（左右分割）や `"`（上下分割）で**ペインを分割**します。

### 2. 表示の開始

Bさんの画面を表示したいペインに移動し、以下のコマンドを実行します：

```bash
cat /tmp/tmux_pipe
```

このコマンドにより、Bさんが `pipe-pane` を開始すると**その内容がリアルタイムで表示**されます。

---

## ✅ 補足

- この方法では、**tmuxセッション自体は共有されない**ため、お互いに独立して作業できます。
- パイプファイルのパーミッションに注意してください（必要に応じて `chmod` を利用）。
