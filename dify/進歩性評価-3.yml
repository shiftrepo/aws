app:
  description: å¯©æŸ»åŸºæº–ã«æ²¿ã£ã¦é€²æ­©æ€§ã‚’è©•ä¾¡ã™ã‚‹ã€‚
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: é€²æ­©æ€§è©•ä¾¡
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/bedrock:0.0.18@af12ae0bf52866c1a81405adaa6020137bc2657f129cc6628022f1245d7c88ff
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: document-extractor
      id: 1746309533136--1746309709692-target
      source: '1746309533136'
      sourceHandle: source
      target: '1746309709692'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: document-extractor
      id: 1746309533136--1746309943303-target
      source: '1746309533136'
      sourceHandle: source
      target: '1746309943303'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 1746309943303--1746309957536-target
      source: '1746309943303'
      sourceHandle: source
      target: '1746309957536'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 1746309709692-source-1746309957536-target
      source: '1746309709692'
      sourceHandle: source
      target: '1746309957536'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: end
      id: 1746309957536--1746310376843-target
      source: '1746309957536'
      sourceHandle: source
      target: '1746310376843'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: document-extractor
      id: 1746309533136--1746311066099-target
      source: '1746309533136'
      sourceHandle: source
      target: '1746311066099'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 1746311066099-source-1746309957536-target
      source: '1746311066099'
      sourceHandle: source
      target: '1746309957536'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: knowledge-retrieval
      id: 1746309533136-source-1747823945965-target
      source: '1746309533136'
      sourceHandle: source
      target: '1747823945965'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1747823945965-source-1746309957536-target
      source: '1747823945965'
      sourceHandle: source
      target: '1746309957536'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: ä¸»å¼•ç”¨ç™ºæ˜
          max_length: 48
          options: []
          required: true
          type: file
          variable: tec_a
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: å‰¯å¼•ç”¨ç™ºæ˜
          max_length: 48
          options: []
          required: true
          type: file
          variable: tec_b
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜
          max_length: 48
          options: []
          required: true
          type: file
          variable: tec_c
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          label: è¦–ç‚¹
          max_length: 5000
          options: []
          required: true
          type: paragraph
          variable: point
      height: 168
      id: '1746309533136'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: false
        selected: false
        title: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
        type: document-extractor
        variable_selector:
        - '1746309533136'
        - tec_a
      height: 92
      id: '1746309709692'
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: false
        selected: false
        title: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º 2
        type: document-extractor
        variable_selector:
        - '1746309533136'
        - tec_b
      height: 92
      id: '1746309943303'
      position:
        x: 384
        y: 413
      positionAbsolute:
        x: 384
        y: 413
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1747823945965'
          - result
        desc: ''
        model:
          completion_params:
            cross-region: true
            reasoning_type: true
            temperature: 0.3
          mode: chat
          name: anthropic claude
          provider: langgenius/bedrock/bedrock
        prompt_template:
        - id: af2e0882-e6fb-44a9-811d-26fa25e8c581
          role: system
          text: 'ã‚ãªãŸã¯ã€æ—¥æœ¬å›½ç‰¹è¨±å¯©æŸ»å®˜ã§ã™ã€‚

            ä¸»å¼•ç”¨ç™ºæ˜ã‚’ã€ä»¥ä¸‹ã®(1)ã‹ã‚‰(4)ã¾ã§ã®æ‰‹é †ã«ã‚ˆã‚Šã€ä¸»å¼•ç”¨ç™ºæ˜ã‹ã‚‰å‡ºç™ºã— ã¦ã€å½“æ¥­è€…ãŒè«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜ã«å®¹æ˜“ã«åˆ°é”ã™ã‚‹è«–ç†ä»˜ã‘ãŒã§ãã‚‹ã‹å¦ã‹ã‚’åˆ¤
            æ–­ã—ã¾ã™ã€‚


            ãªãŠã€ä¸‹è¨˜äº‹é …ã®è«¸äº‹æƒ…ã¯ã€å¯©æŸ»è¦–ç‚¹ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸã‚‚ã®ã‚’åˆ©ç”¨ã™ã‚‹ã€‚

            3.1 é€²æ­©æ€§ãŒå¦å®šã•ã‚Œã‚‹æ–¹å‘ã«åƒãè¦ç´ 

            3.1.1  ä¸»å¼•ç”¨ç™ºæ˜ã«å‰¯å¼•ç”¨ç™ºæ˜ã‚’é©ç”¨ã™ã‚‹å‹•æ©Ÿä»˜ã‘

            (1) æŠ€è¡“åˆ†é‡ã®é–¢é€£æ€§

            (2) èª²é¡Œã®å…±é€šæ€§

            (3) ä½œç”¨ã€æ©Ÿèƒ½ã®å…±é€šæ€§

            (4) å¼•ç”¨ç™ºæ˜ã®å†…å®¹ä¸­ã®ç¤ºå”†

            3.1.2  å‹•æ©Ÿä»˜ã‘ä»¥å¤–ã«é€²æ­©æ€§ãŒå¦å®šã•ã‚Œã‚‹æ–¹å‘ã«åƒãè¦ç´ 

            (1) è¨­è¨ˆå¤‰æ›´ç­‰

            (2) å…ˆè¡ŒæŠ€è¡“ã®å˜ãªã‚‹å¯„ã›é›†ã‚

            3.2 é€²æ­©æ€§ãŒè‚¯å®šã•ã‚Œã‚‹æ–¹å‘ã«åƒãè¦ç´ 

            3.2.1  å¼•ç”¨ç™ºæ˜ã¨æ¯”è¼ƒã—ãŸæœ‰åˆ©ãªåŠ¹æœ

            (1) å¼•ç”¨ç™ºæ˜ã¨æ¯”è¼ƒã—ãŸæœ‰åˆ©ãªåŠ¹æœã®å‚é…Œ

            (2) æ„è¦‹æ›¸ç­‰ã§ä¸»å¼µã•ã‚ŒãŸåŠ¹æœã®å‚é…Œ

            3.2.2  é˜»å®³è¦å› 

            3.3 é€²æ­©æ€§ã®åˆ¤æ–­ã«ãŠã‘ã‚‹ç•™æ„äº‹é …

            å¯©æŸ»è¦–ç‚¹:{{#context#}}

            '
        - id: 155ff4fd-13b5-4010-8b61-1c30d1b0e3e4
          role: user
          text: 'ä¸»å¼•ç”¨ç™ºæ˜:Â {{#1746309709692.text#}}

            å‰¯å¼•ç”¨ç™ºæ˜:{{#1746309943303.text#}}

            è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜:{{#1746309943303.text#}}

            ä¸Šè¨˜ã‚’åˆ©ç”¨ã—ã€è«‹æ±‚é …ã«é–¢ã‚ã‚‹ç™ºæ˜ã®ç™ºæ˜ã®è©³ç´°ãªèª¬æ˜æ¯ã«é€²æ­©æ€§ã‚’ç¢ºèªã—è©•ä¾¡ã—ã¦ä¸‹ã•ã„ã€‚

            é€²æ­©æ€§ã®è©•ä¾¡æ–¹æ³•ã¯ä¸‹è¨˜ã®é€šã‚Šã§ã‚ã‚Šã€è©•ä¾¡ã®ãƒ—ãƒ­ã‚»ã‚¹æ¯ã«å¯©æŸ»æ”¯åº—ã«åŸºã¥ãåˆ¤æ–­ã—ã€åˆ¤æ–­çµæœã‚’ä»˜è¨˜ã—ãŸä¸Šã§ã€è©•ä¾¡ã‚’æ®µéšçš„ã«é€²ã‚ã¦ä¸‹ã•ã„ã€‚

            æ®µéšçš„ã«è©•ä¾¡ã—ãŸçµæœã‹ã‚‰é€²æ­©æ€§ã®æœ€çµ‚åˆ¤æ–­ã‚’ç†ç”±ä»˜ã‘ã—ã¦è¨˜è¼‰ã—ã¦ä¸‹ã•ã„ã€‚

            åˆ©ç”¨ã—ãŸå¯©æŸ»è¦–ç‚¹ã¯ã€å‚è€ƒã¨ã—ã¦æœ«å°¾ã«ä»˜è¨˜ã—ã¦ä¸‹ã•ã„ã€‚


            è©•ä¾¡æ–¹æ³•:

            (1)  å¯©æŸ»å®˜ã¯ã€è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜ã¨ä¸»å¼•ç”¨ç™ºæ˜ã¨ã®é–“ã®ç›¸é•ç‚¹ã«é–¢ã—ã€é€²æ­©æ€§ ãŒå¦å®šã•ã‚Œã‚‹æ–¹å‘ã«åƒãè¦ç´ (3.1å‚ç…§)ã«ä¿‚ã‚‹è«¸äº‹æƒ…ã«åŸºã¥ãã€ä»–ã®å¼•ç”¨ç™ºæ˜(ä»¥ä¸‹ã“ã®ç« ã«ãŠã„ã¦ã€Œå‰¯å¼•ç”¨ç™ºæ˜ã€ã¨ã„ã†ã€‚)ã‚’é©ç”¨ã—ãŸã‚Šã€æŠ€è¡“å¸¸è­˜ã‚’è€ƒæ…®ã—ãŸã‚Šã—ã¦ã€è«–ç†ä»˜ã‘ãŒã§ãã‚‹ã‹å¦ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã€‚

            (2) ä¸Šè¨˜(1)ã«åŸºã¥ãã€è«–ç†ä»˜ã‘ãŒã§ããªã„ã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ã€å¯©æŸ»å®˜ã¯ã€è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜ãŒé€²æ­©æ€§ã‚’æœ‰ã—ã¦ã„ã‚‹ã¨åˆ¤æ–­ã™ã‚‹ã€‚

            (3) ä¸Šè¨˜(1)ã«åŸºã¥ãã€è«–ç†ä»˜ã‘ãŒã§ãã‚‹ã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ã€å¯©æŸ»å®˜ã¯ã€é€²æ­© æ€§ãŒè‚¯å®šã•ã‚Œã‚‹æ–¹å‘ã«åƒãè¦ç´ (3.2å‚ç…§)ã«ä¿‚ã‚‹è«¸äº‹æƒ…ã‚‚å«ã‚ã¦ç·åˆçš„ã«è©•
            ä¾¡ã—ãŸä¸Šã§è«–ç†ä»˜ã‘ãŒã§ãã‚‹ã‹å¦ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã€‚

            (4) ä¸Šè¨˜(3)ã«åŸºã¥ãã€è«–ç†ä»˜ã‘ãŒã§ããªã„ã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ã€å¯©æŸ»å®˜ã¯ã€è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜ãŒé€²æ­©æ€§ã‚’æœ‰ã—ã¦ã„ã‚‹ã¨åˆ¤æ–­ã™ã‚‹ã€‚

            ä¸Šè¨˜(3)ã«åŸºã¥ãã€è«–ç†ä»˜ã‘ãŒã§ããŸã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ã€å¯©æŸ»å®˜ã¯ã€è«‹æ±‚é …ã«ä¿‚ã‚‹ç™ºæ˜ãŒé€²æ­©æ€§ã‚’æœ‰ã—ã¦ã„ãªã„ã¨åˆ¤æ–­ã™ã‚‹ã€‚

            è«‹æ±‚é …ã«é–¢ã‚ã‚‹ç™ºæ˜ãŒã€é€²æ­©æ€§ã‚’æœ‰ã—ã¦ã„ã‚‹ã‹è©•ä¾¡ã—ã¦ä¸‹ã•ã„ã€‚

            ãªãŠã€å¯©æŸ»è¦–ç‚¹ã®ä½•ã‚’ã©ã®ã‚ˆã†ã«å¼•ç”¨ã—ãŸã‹ã€æœ€å¾Œã«ä»˜è¨˜ã—ã¦ä¸‹ã•ã„ã€‚'
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1746309957536'
      position:
        x: 675
        y: 282
      positionAbsolute:
        x: 675
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1746309957536'
          - text
          variable: text
        selected: false
        title: çµ‚äº†
        type: end
      height: 90
      id: '1746310376843'
      position:
        x: 979
        y: 282
      positionAbsolute:
        x: 979
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: false
        selected: false
        title: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º 3
        type: document-extractor
        variable_selector:
        - '1746309533136'
        - tec_c
      height: 92
      id: '1746311066099'
      position:
        x: 384
        y: 544
      positionAbsolute:
        x: 384
        y: 544
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - lXYOo7yH5tjJ6fms742mDCjKZZEonCzA+qRyeRG8w7peRa/U5ORvW73oNJKue2DQ
        desc: ''
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          reranking_model:
            model: amazon.rerank-v1:0
            provider: langgenius/bedrock/bedrock
          top_k: 4
        query_variable_selector:
        - '1746309533136'
        - point
        retrieval_mode: multiple
        selected: false
        title: çŸ¥è­˜æ¤œç´¢
        type: knowledge-retrieval
      height: 92
      id: '1747823945965'
      position:
        x: 384
        y: 675
      positionAbsolute:
        x: 384
        y: 675
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -437.7014641540885
      y: 99.68675860273666
      zoom: 0.8021811663524873
